import{c as t,e as he,f as o,g as x,h as Q,i}from"./chunk-THKE7DQS.js";var _=he((Wt,fe)=>{fe.exports=Serenity.Extensions});var U=o(i(),1);var b=class b extends U.ColumnsBase{};t(b,"GenreColumns"),b.columnsKey="MovieDB.Genre",b.Fields=(0,U.fieldsProxy)();var ee=b;var G=o(i(),1);var l=class l{static getLookup(){return(0,G.getLookup)("MovieDB.Genre")}static getLookupAsync(){return Q(this,null,function*(){return(0,G.getLookupAsync)("MovieDB.Genre")})}};t(l,"GenreRow"),l.idProperty="GenreId",l.nameProperty="Name",l.localTextPrefix="MovieDB.Genre",l.lookupKey="MovieDB.Genre",l.deletePermission="Administration:General",l.insertPermission="Administration:General",l.readPermission="Administration:General",l.updatePermission="Administration:General",l.Fields=(0,G.fieldsProxy)();var X=l;var re=o(i(),1),te;(e=>(e.baseUrl="MovieDB/Genre",e.Methods={Create:"MovieDB/Genre/Create",Update:"MovieDB/Genre/Update",Delete:"MovieDB/Genre/Delete",Retrieve:"MovieDB/Genre/Retrieve",List:"MovieDB/Genre/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(a,n,p){return(0,re.serviceRequest)(e.baseUrl+"/"+r,a,n,p)}})))(te||(te={}));var oe=o(i(),1);var I,A,C=class{format(s){let e=s.value;if(!e||!e.length)return"";let r=I==null?void 0:I.itemById;return r?e.map(a=>{var n=r[a];return s.escape(n==null?a:n.Name)}).join(", "):(A!=null||(A=X.getLookupAsync().then(a=>{var n;I=a;try{(n=s.grid)==null||n.invalidate()}finally{I=null,A=null}}).catch(()=>A=null)),'<i>class="fa fa-spinner"</i>')}};t(C,"GenreListFormatter"),C=x([oe.Decorators.registerFormatter("WebApp.GenreListFormatter")],C);var N=o(i(),1);var ie=o(i(),1),F=(r=>(r[r.Film=1]="Film",r[r.TvSeries=2]="TvSeries",r[r.MiniSeries=3]="MiniSeries",r))(F||{});ie.Decorators.registerEnumType(F,"WebApp.Modules.MovieDB.Movie.MovieKind","MovieDB.MovieKind");var w=class w extends N.ColumnsBase{};t(w,"MovieColumns"),w.columnsKey="MovieDB.Movie",w.Fields=(0,N.fieldsProxy)();var se=w;var ae=o(i(),1);var m=class m{};t(m,"MovieRow"),m.idProperty="MovieId",m.nameProperty="Title",m.localTextPrefix="MovieDB.Movie",m.deletePermission="Administration:General",m.insertPermission="Administration:General",m.readPermission="Administration:General",m.updatePermission="Administration:General",m.Fields=(0,ae.fieldsProxy)();var ne=m;var ce=o(i(),1),pe;(e=>(e.baseUrl="MovieDB/Movie",e.Methods={Create:"MovieDB/Movie/Create",Update:"MovieDB/Movie/Update",Delete:"MovieDB/Movie/Delete",Retrieve:"MovieDB/Movie/Retrieve",List:"MovieDB/Movie/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(a,n,p){return(0,ce.serviceRequest)(e.baseUrl+"/"+r,a,n,p)}})))(pe||(pe={}));var k=o(i(),1);var le=o(i(),1),K=(e=>(e[e.Male=1]="Male",e[e.Female=2]="Female",e))(K||{});le.Decorators.registerEnumType(K,"WebApp.Modules.MovieDB.Gender");var O=class O extends k.ColumnsBase{};t(O,"PersonColumns"),O.columnsKey="MovieDB.Person",O.Fields=(0,k.fieldsProxy)();var ue=O;var E=o(i(),1);var u=class u{static getLookup(){return(0,E.getLookup)("MovieDB.Person")}static getLookupAsync(){return Q(this,null,function*(){return(0,E.getLookupAsync)("MovieDB.Person")})}};t(u,"PersonRow"),u.idProperty="PersonId",u.nameProperty="FullName",u.localTextPrefix="MovieDB.Person",u.lookupKey="MovieDB.Person",u.deletePermission="Administration:General",u.insertPermission="Administration:General",u.readPermission="Administration:General",u.updatePermission="Administration:General",u.Fields=(0,E.fieldsProxy)();var W=u;var me=o(i(),1),de;(e=>(e.baseUrl="MovieDB/Person",e.Methods={Create:"MovieDB/Person/Create",Update:"MovieDB/Person/Update",Delete:"MovieDB/Person/Delete",Retrieve:"MovieDB/Person/Retrieve",List:"MovieDB/Person/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(a,n,p){return(0,me.serviceRequest)(e.baseUrl+"/"+r,a,n,p)}})))(de||(de={}));var h=o(i(),1);var q=class q extends h.PrefixedContext{constructor(s){if(super(s),!q.init){q.init=!0;var e=h.StringEditor;(0,h.initFormType)(q,["Name",e])}}};t(q,"GenreForm"),q.formKey="MovieDB.Genre";var ve=q;var j=o(i(),1);var H=class H extends j.ColumnsBase{};t(H,"MovieCastColumns"),H.columnsKey="MovieDB.MovieCast",H.Fields=(0,j.fieldsProxy)();var Y=H;var D=o(i(),1);var B=class B extends D.PrefixedContext{constructor(s){if(super(s),!B.init){B.init=!0;var e=D.LookupEditor,r=D.StringEditor;(0,D.initFormType)(B,["PersonId",e,"Character",r])}}};t(B,"MovieCastForm"),B.formKey="MovieDB.MovieCast";var T=B;var Re=o(i(),1);var v=class v{};t(v,"MovieCastRow"),v.idProperty="MovieCastId",v.nameProperty="Character",v.localTextPrefix="MovieDB.MovieCast",v.deletePermission="Administration:General",v.insertPermission="Administration:General",v.readPermission="Administration:General",v.updatePermission="Administration:General",v.Fields=(0,Re.fieldsProxy)();var R=v;var ye=o(i(),1),z;(e=>(e.baseUrl="MovieDB/MovieCast",e.Methods={Create:"MovieDB/MovieCast/Create",Update:"MovieDB/MovieCast/Update",Delete:"MovieDB/MovieCast/Delete",Retrieve:"MovieDB/MovieCast/Retrieve",List:"MovieDB/MovieCast/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(a,n,p){return(0,ye.serviceRequest)(e.baseUrl+"/"+r,a,n,p)}})))(z||(z={}));var Me=o(i(),1),Pe=o(_(),1);var xe=o(i(),1),De=o(_(),1);var M=class extends De.GridEditorDialog{constructor(){super(...arguments);this.form=new T(this.idPrefix)}getFormKey(){return T.formKey}getNameProperty(){return R.nameProperty}getLocalTextPrefix(){return R.localTextPrefix}};t(M,"MovieCastEditDialog"),M=x([xe.Decorators.registerClass("WebApp.MovieDB.MovieCastEditDialog")],M);var P=class extends Pe.GridEditorBase{getColumnsKey(){return Y.columnsKey}getLocalTextPrefix(){return R.localTextPrefix}getDialogType(){return M}constructor(s){super(s)}getAddButtonCaption(){return"Add"}validateEntity(s,e){if(!super.validateEntity(s,e))return!1;var r=e!=null?e:s[this.getIdProperty()];return W.getLookupAsync().then(a=>{var p;var n=(p=this.view)==null?void 0:p.getItemById(r);n&&(n.PersonFullName=a.itemById[s.PersonId].FullName,this.view.updateItem(r,n))}),!0}};t(P,"MovieCastEditor"),P=x([Me.Decorators.registerEditor("WebApp.MovieDB.MovieCastEditor")],P);var c=o(i(),1);var g=class g extends c.PrefixedContext{constructor(s){if(super(s),!g.init){g.init=!0;var e=c.StringEditor,r=c.TextAreaEditor,a=P,n=c.IntegerEditor,p=c.DateEditor,Ge=c.EnumEditor,Ee=c.LookupEditor;(0,c.initFormType)(g,["Title",e,"Description",r,"CastList",a,"Storyline",r,"Year",n,"ReleaseDate",p,"Runtime",n,"Kind",Ge,"GenreList",Ee])}}};t(g,"MovieForm"),g.formKey="MovieDB.Movie";var Se=g;var qe=o(i(),1);var y=class y{};t(y,"MovieGenresRow"),y.idProperty="MovieGenreId",y.localTextPrefix="MovieDB.MovieGenres",y.deletePermission="Administration:General",y.insertPermission="Administration:General",y.readPermission="Administration:General",y.updatePermission="Administration:General",y.Fields=(0,qe.fieldsProxy)();var Ce=y;var ge=o(i(),1),Be;(e=>(e.baseUrl="MovieDB/MovieGenres",e.Methods={Create:"MovieDB/MovieGenres/Create",Update:"MovieDB/MovieGenres/Update",Delete:"MovieDB/MovieGenres/Delete",Retrieve:"MovieDB/MovieGenres/Retrieve",List:"MovieDB/MovieGenres/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(a,n,p){return(0,ge.serviceRequest)(e.baseUrl+"/"+r,a,n,p)}})))(Be||(Be={}));var V=o(i(),1);var S=class extends V.EntityGrid{constructor(e){super(e)}getColumnsKey(){return Z.columnsKey}getRowDefinition(){return R}getService(){return z.baseUrl}get personId(){return this._personId}getButtons(){return null}getInitialTitle(){return null}usePager(){return null}getGridCanLoad(){return this.personId!=null}set personId(e){this._personId!=e&&(this._personId=e,this.setEquality(R.Fields.PersonId,e),this.refresh())}};t(S,"PersonMovieGrid"),S=x([V.Decorators.registerEditor("WebApp.MovieDB.PersonMovieGrid")],S);var d=o(i(),1);var L=class L extends d.PrefixedContext{constructor(s){if(super(s),!L.init){L.init=!0;var e=d.StringEditor,r=d.DateEditor,a=d.EnumEditor,n=d.IntegerEditor,p=S;(0,d.initFormType)(L,["FirstName",e,"LastName",e,"BirthDate",r,"BirthPlace",e,"Gender",a,"Height",n,"MoviesGrid",p])}}};t(L,"PersonForm"),L.formKey="MovieDB.Person";var Le=L;var $=o(i(),1);var J=class J extends $.ColumnsBase{};t(J,"PersonMovieColumns"),J.columnsKey="WebApp.MovieDB.Columns.PersonMovieColumns",J.Fields=(0,$.fieldsProxy)();var Z=J;export{ee as a,ve as b,X as c,te as d,se as e,Se as f,ne as g,pe as h,ue as i,Le as j,W as k,de as l};
//# sourceMappingURL=chunk-JWHHLBJX.js.map
